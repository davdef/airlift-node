# Airlift Node - VPS-Konfiguration (Icecast/HTTP-Stream als Input)
# Überschreibt die lokale config.toml für den Betrieb gegen den RFM-Stream.

[monitoring]
http_port = 8087

[ringbuffers.main]
slots = 6000
chunk_ms = 100
prealloc_samples = 9600

[inputs.rfm_icecast]
type = "http_stream"
enabled = true
buffer = "main"
url = "https://icecast.radiorfm.de/rfm.ogg"

[services.monitoring]
type = "monitoring"
enabled = true

[outputs.recorder]
# Recorder schreibt den Ogg/Opus-Stream direkt auf Platte
type = "recorder"
enabled = true
input = "rfm_icecast"
buffer = "main"
codec_id = "opus_ogg"
wav_dir = "/opt/rfm/airlift-node/aircheck/ogg"
retention_days = 7

[codecs.opus_ogg]
type = "opus_ogg"
sample_rate = 48000
channels = 2
frame_size_ms = 20
bitrate = 96000
application = "audio"

[influx_history]
# Optional: History-Abfragen aus InfluxDB
enabled = true
base_url = "http://localhost:8086"
token = ""
org = ""
bucket = "rfm_aircheck"
